<!DOCTYPE html><html lang="en-US"><head><title>4Orbs</title><link href="./style.css" rel="stylesheet" type="text/css"><link rel="icon" type="image/png" sizes="48x48" href="/4orbs/assets/icon-48px.png"><link rel="icon" type="image/png" sizes="96x96" href="/4orbs/assets/icon-96px.png"><link rel="icon" type="image/svg+xml" href="/4orbs/assets/icon.svg"><link rel="shortcut icon" type="image/svg+xml" href="/4orbs/assets/icon.svg"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="" data-react-helmet="true"><meta property="og:ttl" content="60"><meta property="og:type" content="website"><meta property="og:site_name" content="theghostofinky.github.io/4orbs"><meta property="og:url" content="https://theghostofinky.github.io/4orbs/"><meta property="og:description" content="A political quiz with your results in Orbs"><meta property="og:image" content="https://theghostofinky.github.io/4orbs/assets/icon-512px.png"><meta property="og:image:width" content="512"><meta property="og:image:height" content="512"></head><body><h1>4Orbs</h1><hr><h2 id="question-number">Loading...</h2><p id="question-text"></p><div id="button-holder"></div><script type="module">import{loadJson as t,scoreParser as e,randomizeArray as n}from"./dist/commons.min.js";const s=document.getElementById("question-text"),o=document.getElementById("question-number"),i=document.getElementById("button-holder");class c{questions;index;scores;constructor(t){this.questions=t,this.scores=Array(this.questions.length).fill(0),this.index=0}next(t){return this.scores[this.index]=t,++this.index<this.questions.length}prev(){return--this.index>=0}get text(){return this.questions[this.index].question}get qn(){return`Question ${this.index+1} of ${this.questions.length}`}get score(){const t=Object.keys(this.questions[0].effect),e=t.map((t=>this.scores.map(((e,n)=>this.questions[n].effect[t]*e)))),n=t.map((t=>this.questions.map((e=>Math.abs(e.effect[t]))).reduce(((t,e)=>t+e),0)));return e.map(((t,e)=>(t.reduce(((t,e)=>t+e),0)+n[e])/(2*n[e]))).map((t=>Math.floor(7*t)))}}function r(t,e,n=!0){if(n)for(;i.firstChild;)i.removeChild(i.firstChild);t.map(e).forEach((t=>i.appendChild(t)))}function u(t){s.textContent=t.text,o.textContent=t.qn}async function a(){const i=await t("params");s.textContent="Select a test to take:",o.textContent="Test selection",document.title="4Orbs - Quiz selection";r(Object.values(i.quizzes).map((t=>[[t,!1],[t,!0]])).flat(1),(([s,o])=>{const d=document.createElement("button");return d.textContent=s.name+(o?" (random)":""),d.classList.add("button"),d.addEventListener("click",(()=>async function(s,o,i){let d=await t(s.url);i&&(d=n(d)),document.title=`4Orbs - ${s.name}`;const l=new c(d);r(Object.entries(o),(([t,n])=>{const o=document.createElement("button");return o.textContent=n.text,o.classList.add("button",t),o.addEventListener("click",(()=>{if(l.next(n.weight))u(l);else{const t=l.score,n=e.encode(t,s.name);location.href=`results.html?${n}`}})),o})),r([null],(t=>{const e=document.createElement("button");return e.textContent="back",e.classList.add("small-button"),e.addEventListener("click",(()=>{l.prev()?u(l):a()})),e}),!1),u(l)}(s,i.buttons,o))),d}))}window.addEventListener("load",(()=>a().catch((t=>{console.error(t),alert(String(t))}))));</script></body></html>